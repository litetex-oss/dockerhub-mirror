version: 1
creds:
  - registry: ghcr.io
  - registry: docker.io
    user: "{{env \"DOCKERHUB_USER\"}}"
    pass: "{{env \"DOCKERHUB_TOKEN\"}}"
  - registry: dock.mau.dev
defaults:
  parallel: 2
sync:
  - source: ghcr.io/cry-inc/dmarc-report-viewer
    target: litetex/ghcr.cry-inc.dmarc-report-viewer
    type: repository
    tags:
      allow:
      - "latest"
      - "[0-9\\.]*"
      deny:
      # Ignore everything before 2.2
      - "2\\.[0-1]\\..*"
      - "1\\..*"
  - source: ghcr.io/mollyim/mollysocket
    target: litetex/ghcr.mollyim.mollysocket
    type: repository
    tags:
      allow:
      - "latest"
      - "latest-alpine"
      - "[0-9\\.]*"
      - "[0-9\\.]*-alpine"
      deny:
      # Ignore everything before 1.4
      - "1\\.[0-4]"
      - "1\\.[0-4]\\..*"
  - source: ghcr.io/wg-easy/wg-easy
    target: litetex/ghcr.wg-easy.wg-easy
    type: repository
    tags:
      allow:
      - "latest"
      - "[0-9\\.]*"
      deny:
      # Ignore everything before 14
      - "[0-9]"
      - "1[0-3]"
      - "1.0"
  - source: ghcr.io/zitadel/zitadel
    target: litetex/ghcr.zitadel.zitadel
    type: repository
    tags:
      allow:
      - "latest"
      - "latest-debug"
      - "v[0-9\\.]*"
      deny:
      # Ignore everything before 4.3
      - "v4\\.[0-2]\\..*"
      # Ignore everything before 3.4
      - "v3\\.[0-3]\\..*"
      # Ignore everything before 2.71
      - "v2\\.70\\..*"
      - "v2\\.[1-6]?[0-9]\\..*"
      # Ignore v1 series
      - "v1\\..*"
      - "v1"
  - source: dock.mau.dev/mautrix/discord
    target: litetex/mau.mautrix.discord
    type: repository
    tags:
      allow:
      - "latest"
      - "v[0-9\\.]*"
      deny:
      # Ignore everything before 0.7
      - "v0\\.[0-6]\\..*"
      # Accidental
      - "v2"
  - source: dock.mau.dev/mautrix/whatsapp
    target: litetex/mau.mautrix.whatsapp
    type: repository
    tags:
      allow:
      - "latest"
      - "v[0-9\\.]*"
      deny:
      # Ignore everything before 0.2510
      - "v0\\.[0-8]\\..*"
      # Accidental
      - "v2"
  - source: dock.mau.dev/mautrix/signal
    target: litetex/mau.mautrix.signal
    type: repository
    tags:
      allow:
      - "latest"
      - "v[0-9\\.]*"
      deny:
      # Ignore everything before 0.2510
      - "v0\\.1[0-2]\\..*"
      - "v0\\.[0-9]\\..*"
      # Accidental
      - "v2"
  - source: registry.gitlab.com/fmd-foss/fmd-server
    target: litetex/gl.fmd-foss.fmd-server
    type: repository
    tags:
      allow:
      - "latest"
      - "v[0-9\\.]*"
      deny:
      # Ignore everything before 0.11
      - "v0\\.10\\..*"
